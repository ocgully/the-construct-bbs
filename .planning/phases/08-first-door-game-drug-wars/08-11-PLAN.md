---
phase: 08-first-door-game-drug-wars
plan: 11
type: execute
wave: 6
depends_on: ["08-10"]
files_modified:
  - frontend/package.json
  - frontend/playwright.config.ts
  - frontend/tests/e2e/*.spec.ts
autonomous: true

must_haves:
  truths:
    - "Playwright installed and configured"
    - "E2E tests cover BBS connection flow"
    - "E2E tests cover authentication (login, register)"
    - "E2E tests cover navigation system"
    - "E2E tests cover mail, chat, news features"
    - "E2E tests cover Grand Theft Meth gameplay"
    - "All E2E tests pass"
  artifacts:
    - path: "frontend/playwright.config.ts"
      provides: "Playwright configuration"
      contains: "webServer"
    - path: "frontend/tests/e2e/connection.spec.ts"
      provides: "Connection ceremony tests"
      contains: "test("
    - path: "frontend/tests/e2e/auth.spec.ts"
      provides: "Authentication flow tests"
      contains: "test("
    - path: "frontend/tests/e2e/gtm.spec.ts"
      provides: "Grand Theft Meth game tests"
      contains: "test("
---

<objective>
Browser-based end-to-end tests using Playwright for full BBS functionality and Grand Theft Meth.

Purpose: Automate browser testing of WebSocket terminal, ANSI rendering, user flows, and game mechanics.
Output: Comprehensive E2E test suite that validates the complete user experience.
</objective>

<execution_context>
@C:\Users\chris\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\chris\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/08-first-door-game-drug-wars/08-CONTEXT.md
@frontend/package.json
@frontend/src/terminal.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Playwright and configure for WebSocket terminal testing</name>
  <files>frontend/package.json, frontend/playwright.config.ts</files>
  <action>
1. Install Playwright:
   ```bash
   cd frontend
   npm install -D @playwright/test
   npx playwright install chromium
   ```

2. Create playwright.config.ts:
   ```typescript
   import { defineConfig, devices } from '@playwright/test';

   export default defineConfig({
     testDir: './tests/e2e',
     fullyParallel: false, // Sequential for BBS state
     forbidOnly: !!process.env.CI,
     retries: process.env.CI ? 2 : 0,
     workers: 1, // Single worker - BBS has limited nodes
     reporter: 'html',
     use: {
       baseURL: 'http://localhost:3000',
       trace: 'on-first-retry',
       video: 'on-first-retry',
     },
     projects: [
       {
         name: 'chromium',
         use: { ...devices['Desktop Chrome'] },
       },
     ],
     webServer: {
       command: 'cd ../backend && cargo run',
       url: 'http://localhost:3000',
       reuseExistingServer: !process.env.CI,
       timeout: 120000,
     },
   });
   ```

3. Add test scripts to package.json:
   ```json
   "scripts": {
     "test:e2e": "playwright test",
     "test:e2e:ui": "playwright test --ui",
     "test:e2e:debug": "playwright test --debug"
   }
   ```

4. Create tests/e2e directory structure
  </action>
  <verify>
`npm run test:e2e -- --help` shows Playwright help.
  </verify>
  <done>
Playwright installed and configured with WebSocket-friendly settings.
webServer config auto-starts backend for tests.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create terminal helper utilities for tests</name>
  <files>frontend/tests/e2e/helpers/terminal.ts</files>
  <action>
Create helper functions for interacting with xterm.js terminal:

```typescript
// frontend/tests/e2e/helpers/terminal.ts
import { Page, expect } from '@playwright/test';

export class TerminalHelper {
  constructor(private page: Page) {}

  /** Click connect button and wait for terminal */
  async connect() {
    await this.page.click('text=Connect to The Construct');
    await this.page.waitForSelector('.xterm-screen', { timeout: 10000 });
    // Wait for modem sound to finish and login prompt
    await this.page.waitForTimeout(3000);
  }

  /** Type text into terminal */
  async type(text: string) {
    await this.page.keyboard.type(text);
  }

  /** Press a single key */
  async press(key: string) {
    await this.page.keyboard.press(key);
  }

  /** Send text followed by Enter */
  async send(text: string) {
    await this.type(text);
    await this.press('Enter');
  }

  /** Wait for text to appear in terminal */
  async waitForText(text: string, timeout = 10000) {
    await expect(async () => {
      const content = await this.getTerminalContent();
      expect(content).toContain(text);
    }).toPass({ timeout });
  }

  /** Get current terminal text content */
  async getTerminalContent(): Promise<string> {
    return await this.page.evaluate(() => {
      const rows = document.querySelectorAll('.xterm-rows > div');
      return Array.from(rows).map(row => row.textContent || '').join('\n');
    });
  }

  /** Check if terminal contains text */
  async containsText(text: string): Promise<boolean> {
    const content = await this.getTerminalContent();
    return content.includes(text);
  }

  /** Wait for and dismiss any prompt */
  async waitForPrompt(promptText: string) {
    await this.waitForText(promptText);
  }

  /** Navigate menu by pressing a key */
  async menuSelect(key: string) {
    await this.press(key);
    await this.page.waitForTimeout(300); // Allow screen update
  }
}

export async function createTerminal(page: Page): Promise<TerminalHelper> {
  const terminal = new TerminalHelper(page);
  return terminal;
}
```
  </action>
  <verify>
Helper file exists with TerminalHelper class.
  </verify>
  <done>
Terminal helper provides:
- connect() for initial connection
- type/send for input
- waitForText for assertions
- getTerminalContent for screen scraping
- menuSelect for navigation
  </done>
</task>

<task type="auto">
  <name>Task 3: Create connection ceremony E2E tests</name>
  <files>frontend/tests/e2e/connection.spec.ts</files>
  <action>
Test the connection flow:

```typescript
// frontend/tests/e2e/connection.spec.ts
import { test, expect } from '@playwright/test';
import { createTerminal } from './helpers/terminal';

test.describe('Connection Ceremony', () => {
  test('displays connect button on load', async ({ page }) => {
    await page.goto('/');
    await expect(page.locator('text=Connect to The Construct')).toBeVisible();
  });

  test('shows modem connection and splash screen', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    // Should show splash/login screen after ceremony
    await terminal.waitForText('THE CONSTRUCT', 15000);
  });

  test('shows login prompt after ceremony', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:', 15000);
  });
});
```
  </action>
  <verify>
`npm run test:e2e -- connection.spec.ts` passes.
  </verify>
  <done>
Connection tests verify:
- Connect button visible
- Modem ceremony plays
- Splash screen displays
- Login prompt appears
  </done>
</task>

<task type="auto">
  <name>Task 4: Create authentication E2E tests</name>
  <files>frontend/tests/e2e/auth.spec.ts</files>
  <action>
Test login and registration flows:

```typescript
// frontend/tests/e2e/auth.spec.ts
import { test, expect } from '@playwright/test';
import { createTerminal } from './helpers/terminal';

// Use unique handles to avoid conflicts
const testHandle = `test${Date.now()}`;
const testPassword = 'TestPass123!';
const testEmail = `${testHandle}@test.local`;

test.describe('Authentication', () => {
  test('can register new user', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('new');

    // Registration flow
    await terminal.waitForText('handle');
    await terminal.send(testHandle);

    await terminal.waitForText('email', 5000);
    await terminal.send(testEmail);

    await terminal.waitForText('password', 5000);
    await terminal.send(testPassword);

    // Should reach verification or main menu (depending on email config)
    // In dev mode without SMTP, it auto-verifies
    await terminal.waitForText('Main Menu', 30000);
  });

  test('can login with existing credentials', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send(testHandle);

    await terminal.waitForText('Password:');
    await terminal.send(testPassword);

    await terminal.waitForText('Main Menu', 10000);
  });

  test('shows error on invalid login', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('nonexistent_user_xyz');

    await terminal.waitForText('Password:');
    await terminal.send('wrongpassword');

    // Should show error and re-prompt
    await terminal.waitForText('Invalid', 5000);
  });

  test('can quit and disconnect', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send(testHandle);
    await terminal.waitForText('Password:');
    await terminal.send(testPassword);
    await terminal.waitForText('Main Menu', 10000);

    // Quit
    await terminal.menuSelect('Q');
    await terminal.waitForText('goodbye', 5000);
  });
});
```
  </action>
  <verify>
`npm run test:e2e -- auth.spec.ts` passes.
  </verify>
  <done>
Auth tests verify:
- New user registration
- Login with credentials
- Invalid login rejection
- Quit/logout flow
  </done>
</task>

<task type="auto">
  <name>Task 5: Create navigation E2E tests</name>
  <files>frontend/tests/e2e/navigation.spec.ts</files>
  <action>
Test menu navigation:

```typescript
// frontend/tests/e2e/navigation.spec.ts
import { test, expect } from '@playwright/test';
import { createTerminal } from './helpers/terminal';

const testHandle = 'navtest';
const testPassword = 'NavPass123!';

test.describe('Navigation', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    // Login (assumes user exists from auth tests or create here)
    await terminal.waitForText('Handle:');
    await terminal.send(testHandle);
    await terminal.waitForText('Password:');
    await terminal.send(testPassword);
    await terminal.waitForText('Main Menu', 15000);
  });

  test('shows main menu with options', async ({ page }) => {
    const terminal = await createTerminal(page);
    const content = await terminal.getTerminalContent();

    expect(content).toContain('Mail');
    expect(content).toContain('Chat');
    expect(content).toContain('Games');
  });

  test('can enter Games submenu', async ({ page }) => {
    const terminal = await createTerminal(page);
    await terminal.menuSelect('G');

    await terminal.waitForText('Grand Theft Meth', 5000);
  });

  test('can return from submenu with Q', async ({ page }) => {
    const terminal = await createTerminal(page);
    await terminal.menuSelect('G');
    await terminal.waitForText('Grand Theft Meth');

    await terminal.menuSelect('Q');
    await terminal.waitForText('Main Menu', 5000);
  });

  test('can view profile with P', async ({ page }) => {
    const terminal = await createTerminal(page);
    await terminal.menuSelect('P');

    await terminal.waitForText(testHandle, 5000);
    await terminal.waitForText('Member since', 5000);
  });

  test('can access Who\'s Online with W', async ({ page }) => {
    const terminal = await createTerminal(page);
    await terminal.menuSelect('W');

    await terminal.waitForText('Online', 5000);
  });
});
```
  </action>
  <verify>
`npm run test:e2e -- navigation.spec.ts` passes.
  </verify>
  <done>
Navigation tests verify:
- Main menu displays options
- Games submenu accessible
- Q returns from submenu
- Profile view works
- Who's Online works
  </done>
</task>

<task type="auto">
  <name>Task 6: Create mail E2E tests</name>
  <files>frontend/tests/e2e/mail.spec.ts</files>
  <action>
Test email functionality:

```typescript
// frontend/tests/e2e/mail.spec.ts
import { test, expect } from '@playwright/test';
import { createTerminal } from './helpers/terminal';

test.describe('Mail System', () => {
  test('can access mail inbox', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    // Login
    await terminal.waitForText('Handle:');
    await terminal.send('mailtest');
    await terminal.waitForText('Password:');
    await terminal.send('MailPass123!');
    await terminal.waitForText('Main Menu', 15000);

    // Access mail
    await terminal.menuSelect('M');
    await terminal.waitForText('Inbox', 5000);
  });

  test('can compose new message', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('mailtest');
    await terminal.waitForText('Password:');
    await terminal.send('MailPass123!');
    await terminal.waitForText('Main Menu', 15000);

    await terminal.menuSelect('M');
    await terminal.waitForText('Inbox');

    // Compose
    await terminal.menuSelect('C');
    await terminal.waitForText('To:', 5000);
  });

  test('can quit mail and return to menu', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('mailtest');
    await terminal.waitForText('Password:');
    await terminal.send('MailPass123!');
    await terminal.waitForText('Main Menu', 15000);

    await terminal.menuSelect('M');
    await terminal.waitForText('Inbox');

    await terminal.menuSelect('Q');
    await terminal.waitForText('Main Menu', 5000);
  });
});
```
  </action>
  <verify>
`npm run test:e2e -- mail.spec.ts` passes.
  </verify>
  <done>
Mail tests verify:
- Inbox accessible
- Compose flow starts
- Can exit back to menu
  </done>
</task>

<task type="auto">
  <name>Task 7: Create chat E2E tests</name>
  <files>frontend/tests/e2e/chat.spec.ts</files>
  <action>
Test chat functionality:

```typescript
// frontend/tests/e2e/chat.spec.ts
import { test, expect } from '@playwright/test';
import { createTerminal } from './helpers/terminal';

test.describe('Chat System', () => {
  test('can enter chat room', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('chattest');
    await terminal.waitForText('Password:');
    await terminal.send('ChatPass123!');
    await terminal.waitForText('Main Menu', 15000);

    await terminal.menuSelect('C');
    await terminal.waitForText('Teleconference', 5000);
  });

  test('can send chat message', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('chattest');
    await terminal.waitForText('Password:');
    await terminal.send('ChatPass123!');
    await terminal.waitForText('Main Menu', 15000);

    await terminal.menuSelect('C');
    await terminal.waitForText('Teleconference');

    await terminal.send('Hello from E2E test!');
    await terminal.waitForText('Hello from E2E test', 3000);
  });

  test('can use /quit to exit chat', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('chattest');
    await terminal.waitForText('Password:');
    await terminal.send('ChatPass123!');
    await terminal.waitForText('Main Menu', 15000);

    await terminal.menuSelect('C');
    await terminal.waitForText('Teleconference');

    await terminal.send('/quit');
    await terminal.waitForText('Main Menu', 5000);
  });
});
```
  </action>
  <verify>
`npm run test:e2e -- chat.spec.ts` passes.
  </verify>
  <done>
Chat tests verify:
- Can enter chat room
- Can send messages
- Can exit with /quit
  </done>
</task>

<task type="auto">
  <name>Task 8: Create news E2E tests</name>
  <files>frontend/tests/e2e/news.spec.ts</files>
  <action>
Test news functionality:

```typescript
// frontend/tests/e2e/news.spec.ts
import { test, expect } from '@playwright/test';
import { createTerminal } from './helpers/terminal';

test.describe('News System', () => {
  test('can access news', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('newstest');
    await terminal.waitForText('Password:');
    await terminal.send('NewsPass123!');
    await terminal.waitForText('Main Menu', 15000);

    await terminal.menuSelect('N');
    // Either shows news or loading/error
    await terminal.waitForText('WIRE', 10000);
  });

  test('can navigate news with arrow keys', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('newstest');
    await terminal.waitForText('Password:');
    await terminal.send('NewsPass123!');
    await terminal.waitForText('Main Menu', 15000);

    await terminal.menuSelect('N');
    await terminal.waitForText('WIRE', 10000);

    // Navigate down
    await terminal.press('ArrowDown');
    await page.waitForTimeout(500);
  });

  test('can exit news with Q', async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('newstest');
    await terminal.waitForText('Password:');
    await terminal.send('NewsPass123!');
    await terminal.waitForText('Main Menu', 15000);

    await terminal.menuSelect('N');
    await terminal.waitForText('WIRE', 10000);

    await terminal.menuSelect('Q');
    await terminal.waitForText('Main Menu', 5000);
  });
});
```
  </action>
  <verify>
`npm run test:e2e -- news.spec.ts` passes.
  </verify>
  <done>
News tests verify:
- News accessible
- Arrow key navigation
- Exit with Q
  </done>
</task>

<task type="auto">
  <name>Task 9: Create Grand Theft Meth E2E tests</name>
  <files>frontend/tests/e2e/gtm.spec.ts</files>
  <action>
Test Grand Theft Meth game:

```typescript
// frontend/tests/e2e/gtm.spec.ts
import { test, expect } from '@playwright/test';
import { createTerminal } from './helpers/terminal';

test.describe('Grand Theft Meth', () => {
  test.beforeEach(async ({ page }) => {
    await page.goto('/');
    const terminal = await createTerminal(page);
    await terminal.connect();

    await terminal.waitForText('Handle:');
    await terminal.send('gtmtest');
    await terminal.waitForText('Password:');
    await terminal.send('GtmPass123!');
    await terminal.waitForText('Main Menu', 15000);
  });

  test('can launch game from menu', async ({ page }) => {
    const terminal = await createTerminal(page);

    // Go to Games submenu
    await terminal.menuSelect('G');
    await terminal.waitForText('Grand Theft Meth');

    // Launch game
    await terminal.menuSelect('1');

    // Should see intro or main menu
    await terminal.waitForText('GRAND THEFT METH', 10000);
  });

  test('can skip intro and see main menu', async ({ page }) => {
    const terminal = await createTerminal(page);

    await terminal.menuSelect('G');
    await terminal.waitForText('Grand Theft Meth');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);

    // Press any key to skip intro
    await terminal.press('Space');
    await page.waitForTimeout(500);

    // Should see game menu with options
    await terminal.waitForText('Travel', 5000);
  });

  test('shows status bar with game stats', async ({ page }) => {
    const terminal = await createTerminal(page);

    await terminal.menuSelect('G');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);
    await terminal.press('Space');
    await terminal.waitForText('Travel', 5000);

    const content = await terminal.getTerminalContent();
    expect(content).toContain('Day');
    expect(content).toContain('Cash');
    expect(content).toContain('Debt');
  });

  test('can access travel screen', async ({ page }) => {
    const terminal = await createTerminal(page);

    await terminal.menuSelect('G');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);
    await terminal.press('Space');
    await terminal.waitForText('Travel', 5000);

    await terminal.menuSelect('T');
    await terminal.waitForText('Bronx', 5000);
  });

  test('can access trade screen', async ({ page }) => {
    const terminal = await createTerminal(page);

    await terminal.menuSelect('G');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);
    await terminal.press('Space');
    await terminal.waitForText('Travel', 5000);

    await terminal.menuSelect('B');
    // Trade screen shows commodities
    await terminal.waitForText('Buy', 5000);
  });

  test('can access loan shark', async ({ page }) => {
    const terminal = await createTerminal(page);

    await terminal.menuSelect('G');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);
    await terminal.press('Space');
    await terminal.waitForText('Travel', 5000);

    await terminal.menuSelect('L');
    await terminal.waitForText('Loan Shark', 5000);
  });

  test('can quit game and return to BBS menu', async ({ page }) => {
    const terminal = await createTerminal(page);

    await terminal.menuSelect('G');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);
    await terminal.press('Space');
    await terminal.waitForText('Travel', 5000);

    // Quit game
    await terminal.menuSelect('X');
    await terminal.waitForText('quit', 3000);
    await terminal.menuSelect('Y');

    // Back to BBS menu
    await terminal.waitForText('Main Menu', 5000);
  });

  test('game saves on quit and resumes', async ({ page }) => {
    const terminal = await createTerminal(page);

    // Start game
    await terminal.menuSelect('G');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);
    await terminal.press('Space');
    await terminal.waitForText('Travel', 5000);

    // Travel to change state
    await terminal.menuSelect('T');
    await terminal.waitForText('Bronx', 5000);
    await terminal.menuSelect('2'); // Select different borough
    await page.waitForTimeout(1000);

    // Quit
    await terminal.menuSelect('X');
    await terminal.waitForText('quit');
    await terminal.menuSelect('Y');
    await terminal.waitForText('Main Menu', 5000);

    // Re-launch - should resume
    await terminal.menuSelect('G');
    await terminal.menuSelect('1');

    // Should show intro for resumed game
    await terminal.waitForText('GRAND THEFT METH', 10000);
  });

  test('can use drugs if in inventory', async ({ page }) => {
    const terminal = await createTerminal(page);

    await terminal.menuSelect('G');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);
    await terminal.press('Space');
    await terminal.waitForText('Travel', 5000);

    await terminal.menuSelect('U');
    // Either shows use screen or "no drugs" message
    await page.waitForTimeout(1000);
  });

  test('can access quests screen', async ({ page }) => {
    const terminal = await createTerminal(page);

    await terminal.menuSelect('G');
    await terminal.menuSelect('1');
    await terminal.waitForText('GRAND THEFT METH', 10000);
    await terminal.press('Space');
    await terminal.waitForText('Travel', 5000);

    await terminal.menuSelect('Q');
    await terminal.waitForText('Quest', 5000);
  });
});
```
  </action>
  <verify>
`npm run test:e2e -- gtm.spec.ts` passes.
  </verify>
  <done>
GTM tests verify:
- Game launches from menu
- Intro skippable
- Status bar displays
- Travel screen accessible
- Trade screen accessible
- Loan shark accessible
- Quit and save works
- Game resumes from save
- Use drugs screen
- Quests screen
  </done>
</task>

<task type="auto">
  <name>Task 10: Run full E2E suite and fix failures</name>
  <files>frontend/tests/e2e/*.spec.ts</files>
  <action>
Run the complete E2E test suite and iterate until all tests pass:

1. Ensure backend is built: `cd backend && cargo build`
2. Run all E2E tests: `cd frontend && npm run test:e2e`
3. For each failing test:
   - Review the failure reason
   - Fix timing issues (add waits)
   - Fix selector issues
   - Fix assertion issues
4. Re-run until all pass

Common fixes:
- Increase timeouts for slow operations
- Add waitForTimeout after menu selections
- Use more specific text matches
- Handle race conditions with retries
  </action>
  <verify>
`npm run test:e2e` shows all tests passing.
  </verify>
  <done>
All E2E tests pass.
Full browser coverage for:
- Connection ceremony
- Authentication
- Navigation
- Mail, Chat, News
- Grand Theft Meth gameplay
  </done>
</task>

</tasks>

<verification>
Playwright installed and configured.
All E2E test files created.
npm run test:e2e passes all tests.
Tests cover connection, auth, navigation, features, and GTM.
</verification>

<success_criteria>
- Playwright installed with proper config
- Terminal helper utilities work
- Connection ceremony tests pass
- Authentication tests pass
- Navigation tests pass
- Mail tests pass
- Chat tests pass
- News tests pass
- Grand Theft Meth tests pass
- Full E2E suite runs green
</success_criteria>

<output>
After completion, create `.planning/phases/08-first-door-game-drug-wars/08-10-SUMMARY.md`
</output>
